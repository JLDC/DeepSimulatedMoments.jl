<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Data generating processes · DeepSimulatedMoments</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">DeepSimulatedMoments</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Data generating processes</a><ul class="internal"><li><a class="tocitem" href="#Minimal-interfaces-to-implement"><span>Minimal interfaces to implement</span></a></li><li><a class="tocitem" href="#Example"><span>Example</span></a></li></ul></li><li><a class="tocitem" href="../MGNs/">Moment Generating Networks</a></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Data generating processes</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Data generating processes</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JLDC/DeepSimulatedMoments.jl/blob/master/docs/src/DGPs.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Data-Generating-Processes"><a class="docs-heading-anchor" href="#Data-Generating-Processes">Data Generating Processes</a><a id="Data-Generating-Processes-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Generating-Processes" title="Permalink"></a></h1><p>Data Generating Processes (DGPs) are at the heart of our package. They are statistical models used to simulate data sets with specific characteristics, which makes them an essential component of the method of simulated moments.</p><p>To use DGPs in our package, you need to implement several minimal interfaces, which are described in the following section. Once you&#39;ve implemented these interfaces, you can use the resulting DGP to generate data sets, train a neural network, and proceed with statistical inference using the method of simulated moments.</p><h2 id="Minimal-interfaces-to-implement"><a class="docs-heading-anchor" href="#Minimal-interfaces-to-implement">Minimal interfaces to implement</a><a id="Minimal-interfaces-to-implement-1"></a><a class="docs-heading-anchor-permalink" href="#Minimal-interfaces-to-implement" title="Permalink"></a></h2><p>To write a custom DGP, the following minimal interfaces must be implemented:</p><ul><li><a href="../api/#DeepSimulatedMoments.nfeatures"><code>nfeatures(d::AbstractDGP)</code></a>, returns the number of features in the data set that the DGP generates, i.e., the dimension of one observation. Note that when a model has an outcome (e.g., a linear regression model), this outcome should count towards the number of features.</li><li><a href="../api/#DeepSimulatedMoments.nparams"><code>nparams(d::AbstractDGP)</code></a>, returns the number of parameters in the DGP.</li><li><a href="../api/#DeepSimulatedMoments.priordraw"><code>priordraw(d::AbstractDGP, S::Int)</code></a>, returns a sample of the prior distribution of the parameters. The output corresponds to <code>S</code> parameter draws from the DGP <code>d</code> and is a matrix of size <code>S × nparams(d)</code>.</li><li><a href="../api/#DeepSimulatedMoments.generate"><code>generate</code></a>, the function that generates a data set, with two methods:<ul><li><a href="../api/#DeepSimulatedMoments.generate"><code>generate(d::AbstractDGP, S::Int)</code></a>, generates random parameters and matching data sets. The first argument, <code>d</code>, should be an instance of the DGP. The second argument, <code>S</code>, should be an integer representing the number of data sets and parameter draws to be generated.</li><li><a href="../api/#DeepSimulatedMoments.generate"><code>generate(θ::AbstractVector{T}, d::AbstractDGP{T}, S::Int)</code></a>, generates <code>S</code> data sets given a set of parameters <code>θ</code>. The first argument, <code>θ</code>, should be a vector of parameter values in the format expected by the DGP. The second argument, <code>d</code>, should be an instance of the DGP. The third argument, <code>S</code>, should be an integer representing the number of data sets to be generated.</li></ul></li></ul><p>These interfaces provide the foundation for writing custom DGPs. With a well-defined DGP, you can train a neural network on the data set and proceed with statistical inference using the method of simulated moments.</p><h2 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h2><p>This example shows how to implement a simple linear regression DGP with <code>K</code> features, which generates a data set with <code>N</code> observations.</p><h4 id=".-Define-the-DGP-struct"><a class="docs-heading-anchor" href="#.-Define-the-DGP-struct">1. Define the DGP <code>struct</code></a><a id=".-Define-the-DGP-struct-1"></a><a class="docs-heading-anchor-permalink" href="#.-Define-the-DGP-struct" title="Permalink"></a></h4><pre><code class="language-julia hljs">struct LinearRegression{T} &lt;: AbstractDGP{T}
    N::Int # Number of observations that our data set will have
    K::Int # Number of features in our data set
end</code></pre><h4 id=".-Implement-the-nfeatures-and-nparams-interface"><a class="docs-heading-anchor" href="#.-Implement-the-nfeatures-and-nparams-interface">2. Implement the <code>nfeatures</code> and <code>nparams</code> interface</a><a id=".-Implement-the-nfeatures-and-nparams-interface-1"></a><a class="docs-heading-anchor-permalink" href="#.-Implement-the-nfeatures-and-nparams-interface" title="Permalink"></a></h4><pre><code class="language-julia hljs">nfeatures(d::LinearRegression) = d.K + 1 # We have K features and 1 outcome
nparams(d::LinearRegression) = d.K + 1 # We have K features and 1 intercept</code></pre><h4 id=".-Implement-the-priordraw-interface"><a class="docs-heading-anchor" href="#.-Implement-the-priordraw-interface">3. Implement the <code>priordraw</code> interface</a><a id=".-Implement-the-priordraw-interface-1"></a><a class="docs-heading-anchor-permalink" href="#.-Implement-the-priordraw-interface" title="Permalink"></a></h4><pre><code class="language-julia hljs">function priordraw(d::LinearRegression{T}, S::Int) where T
    # Draw random parameters from a standard normal distribution 
    # (we could modify this to draw from a different distribution)
    randn(T, S, nparams(d))
end</code></pre><h4 id=".-Implement-the-simulate-interface-(optional)"><a class="docs-heading-anchor" href="#.-Implement-the-simulate-interface-(optional)">4. Implement the <code>simulate</code> interface (optional)</a><a id=".-Implement-the-simulate-interface-(optional)-1"></a><a class="docs-heading-anchor-permalink" href="#.-Implement-the-simulate-interface-(optional)" title="Permalink"></a></h4><p>While this interface is not necessary, it is a practical helper as we can use it in both implementations of the <code>generate</code> interface.</p><pre><code class="language-julia hljs">function simulate(d::LinearRegression{T}, θ::AbstractVector{T}) where T
    ϵ = rand(T, d.N) # Error terms
    # Features: one intercept and K random (standard normal) features
    X = hcat(ones(T, d.N), randn(T, d.N, d.K))
    # Outcomes
    y = X * θ + ϵ
    hcat(X, y)
end</code></pre><h4 id=".-Implement-the-generate-interfaces"><a class="docs-heading-anchor" href="#.-Implement-the-generate-interfaces">5. Implement the <code>generate</code> interfaces</a><a id=".-Implement-the-generate-interfaces-1"></a><a class="docs-heading-anchor-permalink" href="#.-Implement-the-generate-interfaces" title="Permalink"></a></h4><pre><code class="language-julia hljs"># Generate S data sets and matching parameters
function generate(d::LinearRegression{T}, S::Int) where T
    # Draw random parameters from the prior
    θ = priordraw(d, S)
    X = zeros(T, d.N, S, nfeatures(d))

    for s ∈ axes(X, 2)
        X[:, s, :] = simulate(d, θ[s, :])
    end

    permutedims(X, (3, 2, 1)), θ
end

# Generate S data sets given a set of parameters θ
function generate(θ::AbstractVector{T}, d::LinearRegression{T}, S::Int) where T
    X = zeros(T, d.N, S, nfeatures(d))

    for s ∈ axes(X, 2)
        X[:, s, :] = simulate(d, θ)
    end

    permutedims(X, (3, 2, 1))
end</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../MGNs/">Moment Generating Networks »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Tuesday 25 July 2023 06:22">Tuesday 25 July 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
